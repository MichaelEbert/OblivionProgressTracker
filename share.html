<!DOCTYPE html>
<html><head>
	<meta charset="UTF-8"/>
	<link rel="stylesheet" type="text/css" href="css/main.css"/>
	<link rel="stylesheet" type="text/css" href="css/guide.css"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Share â€” Interactive Oblivion Checklist</title>
</head>
<body>
    Downloading Save...
    <script type="module">
	import * as userdata from './js/userdata.mjs'
    import * as sharing from './js/sharing.mjs'
    window.sharing = sharing;
    window.userdata = userdata;

	(function(){
		if(userdata.loadCookie("debug") == true){
			window.debug = true;
        }
        //load a very minimal set of scripts, just enough to download progress.
        let shareCode = new URLSearchParams(window.location.search).get("code");
        if(shareCode == null || shareCode == ""){
            window.location.href = "./checklist.html";
        }
        else{
            userdata.loadSettingsFromCookie();

            settings.remoteShareCode = shareCode;
            userdata.saveCookie("settings",settings);
            sharing.startSpectating(false,false)
                .then(()=>window.location.href = "./checklist.html");
        }
	}).call(window);
        
        
    </script>
</body>
</html>