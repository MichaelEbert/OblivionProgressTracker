<!DOCTYPE html>
<html><head>
	<meta charset="UTF-8"/>
	<link rel="icon" type="image/png" href="./favicon.ico"/>
	<link rel="stylesheet" type="text/css" href="css/main.css"/>
	<link rel="stylesheet" type="text/css" href="css/guide.css"/>
	<script src="https://valarnin.github.io/oblivion-save-reader/dist/bundle.savefile.js defer"></script>
    <script src="https://valarnin.github.io/oblivion-save-reader/dist/bundle.record.js defer"></script>
	<script src="./settings.js"></script>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Settings — Interactive Oblivion Checklist</title>
</head>
<body>
	<!-- begin topbar-->
<nav id="topbar" class="topbar">
	<div class="topbarSection icon">
		<a href="https://prclive.run/"><img src="images/prcbanner.png" style="width: 90px;"></a>
		<div class="topbarSublist">
			<a href="https://www.twitch.tv/prclive" class="topbarSection">Twitch</a>
			<a href="https://www.youtube.com/c/prclive" class="topbarSection">YouTube</a>
			<a href="https://discord.gg/eudsps7" class="topbarSection">Discord</a>
			<a href="https://github.com/MichaelEbert/OblivionProgressTracker" class="topbarSection">GitHub</a>
			<a href="https://twitter.com/_prclive" class="topbarSection">Twitter</a>
		</div>
	</div>
	<a href="./index.html" class="topbarSection">Home</a>
	<a href="./main.html" class="topbarSection">Checklist</a>
	
	<div class="topbarSection">
		<a href="./speedrun-4.html">Guide</a>
		<div class="topbarSublist">
			<a href="./speedrun-4.html">Speedrun Guide (V4)</a>
			<a href="./casual.html">Casual Guide</a>
			<a href="./speedrun-archive.html">Archive</a>
		</div>
	</div>

	<div class="topbarSection">
		<a href="./map.html">Map</a>
		<div class="topbarSublist">
			<a href="./nirnroute.html">Nirnroute</a>
		</div>
	</div>

	<div class="topbarSection">
		<a href="https://prclive.run/wiki/Oblivion:Tools/Resources">Wiki/Tools</a>
		<div class="topbarSublist">
			<a href="https://prclive.run/wiki/Main_Page">Wiki</a>
			<a href="./tools/tools.html">Tools</a>
			<a href="https://prclive.run/wiki/Oblivion:Glitches/Tech">Glitches</a>
			<a href="https://prclive.run/wiki/Oblivion:Tools/Resources">Tools/Resources Directory</a>
		</div>
	</div>

	<a href="./settings.html" class="topbarSection icon" style="font-size: 0.85em;" title="Settings">⚙️</a>

	<div class="topbarSection"><span class="totalProgressPercent">0</span>%</div> 
</nav>
<!-- end topbar-->
<article class="main">
<h1>Settings</h1>
<div class="section">
<div class="sectionTitle">Preferences</div>
<div class="collapsibleContent">
	<div class="category">
		<div class="categoryTitle">General</div>
		<!--When you add a setting here, also add it in userdata.mjs so it will be populated for new users.-->
		<label><input type="checkbox" id="minipageCheck" class="autosetting"/> Link books to local page (uncheck for direct UESP links)</label><br/>
		<label><input type="checkbox" id="classnameCheck" class="autosetting"/>Show [npc], [book], etc. in front of checklist names on guide</label><br/>
		<label><select name="iframeCheck" id="iframeCheck" class="autoTextSetting">
			<option value="auto" title="open links in iframe if window is wide enough">Auto</option>
			<option value="on" title="always open links in iframe">Always on</option>
			<option value="off" title="never open links in iframe">Always off</option>
			<option value="window" title="Open links in another window">Other Window</option>
		</select> enable opening links in-page on right side of screen</label><br/>
		<label><input type="number" id="iframeMinWidth" class="autoTextSetting"/>Minimum page width to show second column (for auto)</label><br/>
		<label><input type="text" id="iframeWidth" class="autoTextSetting"/>Width of second column (when shown)</label><br/>
	</div>
	<div class="category">
		<div class="categoryTitle">Map Settings</div>
		<label><input name="aaa" type="checkbox" id="mapShowPrediscovered" class="autosetting">Show prediscovered locations</label><br/>
		<label><input type="checkbox" id="mapShowDistanceCheck" class="autosetting">Show distance between locations</label><br/>
		<label><input type="checkbox" id="mapShowFormId" class="autosetting">Show formID on map</label><br/>
	</div>
</div>
</div>

<div class="section">
<div class="sectionTitle">Sharing</div>
<div class="collapsibleContent">
	<label><input type="text" id="serverUrl" size="60" class="autoTextSetting"/>Share server path </label><br/>
	<button id="shareProgressButton" onclick="uploadCurrentSave()">Share Progress*</button> My share URL:<input type="text" id="myShareUrl" size="80" readonly="true"/><br/>
	<label><input type="checkbox" id="autoUploadCheck" class="autosetting"/>Auto upload save on change</label><br/>
	<button id="copyShareKeyButton">Copy share key to clipboard</button><br/>
	Spectate other:<input type="text" id="remoteShareCode"/><button id="clearRemoteButton">Clear</button><br/>
	<label><input type="checkbox" id="spectateAutoRefresh" class="autosetting"/>Auto refresh when spectating</label><br/>
	<label><input type="number" id="spectateAutoRefreshInterval" class="autoTextSetting"/>Auto refresh time (seconds)</label><br/>

</div>
</div>
<div class="section">
<div class="sectionTitle">Import/Export</div>
<div class="collapsibleContent">
	<button id="resetbutton" onclick="userdata.resetProgress(true)">Reset progress</button><br/>
	<button id="exportProgressButton" onclick="exportProgress()">Save Progress to File</button><br/>
	<label>Import Progress from file: <input type="file" id="fileinput"/></label><br/>
</div>
</div>
<p style="font-size: small">*By sharing your progress, you agree that your progress, progress url, ip address, and time uploaded may be stored on a server.</p>
</article>

<script type="module">
	import exportNamespace from './js/module-shim.mjs'
	import * as userdata from './js/userdata.mjs'
	import * as obliviondata from './js/obliviondata.mjs'
	import * as sharing from './js/sharing.mjs'
	import * as saveReader from './js/saveReader.mjs'
	exportNamespace(userdata);
	exportNamespace(obliviondata);
	exportNamespace(sharing);
	window.userdata = userdata;
	window.obliviondata = obliviondata;
	window.sharing = sharing;
	window.saveReader = saveReader;
	(function(){
		if(loadCookie("debug") == true){
			window.debug = true;
		}
		init();
	}).call(window);
</script>
<script>
	let percentCompleteSoFar = localStorage.getItem("percentageDone");
	//round progress to 2 decimal places
	let progress = Math.round((percentCompleteSoFar * 100)*100)/100;
	Array.of(...document.getElementsByClassName("totalProgressPercent")).forEach(element => {
		element.innerText = progress.toString();
		if(element.parentElement.className == "topbarSection"){
			element.parentElement.style = `background: linear-gradient(to right, green ${progress.toString()}%, red ${progress.toString()}%);`;
		}
	});
</script>
<script src="collapsible.js"></script>
</body>
</html>